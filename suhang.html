<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>L.I.T.E | ìˆ˜í–‰í‰ê°€ ê´€ë¦¬ ì‹œìŠ¤í…œ</title>
  <style>
    body {
      margin: 0;
      font-family: 'Noto Sans KR', system-ui, -apple-system, sans-serif;
      background: #0b132b;
      color: #fff;
    }
    header {
      position: sticky;
      top: 0;
      backdrop-filter: blur(6px);
      background: rgba(11, 19, 43, 0.8);
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.9rem 1rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.12);
      z-index: 20;
    }
    header .title {
      font-weight: 700;
      letter-spacing: 0.3px;
      font-size: 1.1rem;
    }
    main {
      max-width: 1100px;
      margin: 1.4rem auto 2.4rem;
      padding: 0 1rem;
    }
    .toolbar {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      align-items: center;
      margin-bottom: 1rem;
    }
    input[type="search"],
    select {
      padding: 0.6rem 0.9rem;
      border-radius: 8px;
      border: none;
      background: rgba(148, 163, 253, 0.1);
      color: #e5e7eb;
      outline: none;
      min-width: 140px;
    }
    input::placeholder {
      color: rgba(148, 163, 253, 0.7);
    }
    .btn {
      padding: 0.5rem 0.9rem;
      border-radius: 8px;
      border: 1px solid rgba(129, 140, 248, 0.5);
      background: rgba(15, 23, 42, 0.9);
      color: #e5e7eb;
      cursor: pointer;
      font-size: 0.9rem;
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
    }
    .btn:hover {
      background: rgba(79, 70, 229, 0.9);
      box-shadow: 0 0 12px rgba(79, 70, 229, 0.5);
    }
    .card {
      background: rgba(15, 23, 42, 0.98);
      border-radius: 14px;
      border: 1px solid rgba(148, 163, 253, 0.18);
      overflow: hidden;
      box-shadow: 0 18px 40px rgba(15, 23, 42, 0.9);
    }
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9rem;
    }
    thead th {
      text-align: left;
      padding: 0.75rem 1rem;
      background: radial-gradient(circle at top left, rgba(79, 70, 229, 0.22), transparent);
      border-bottom: 1px solid rgba(148, 163, 253, 0.25);
      font-weight: 600;
      color: #c7d2fe;
      white-space: nowrap;
    }
    tbody td {
      padding: 0.7rem 1rem;
      border-top: 1px solid rgba(75, 85, 99, 0.35);
      vertical-align: middle;
    }
    tbody tr:nth-child(even) {
      background: rgba(15, 23, 42, 0.98);
    }
    tbody tr:nth-child(odd) {
      background: rgba(9, 9, 20, 0.98);
    }
    .badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0.13rem 0.5rem;
      margin-left: 0.25rem;
      border-radius: 999px;
      font-size: 0.7rem;
      border: 1px solid rgba(129, 140, 248, 0.8);
      color: #a5b4fc;
      background: rgba(17, 24, 39, 0.96);
    }
    .grade {
      color: #38bdf8;
      font-weight: 500;
    }
    .favorite-btn {
      background: none;
      border: none;
      font-size: 1.25rem;
      cursor: pointer;
      color: rgba(148, 163, 253, 0.4);
      padding: 0;
    }
    .favorite-btn.active {
      color: #facc15;
      text-shadow: 0 0 8px rgba(250, 204, 21, 0.7);
    }
    .dday {
      font-weight: 600;
      color: #38bdf8;
    }
    .dday.expired {
      color: #fb7185;
    }
    .dday.today {
      color: #22c55e;
    }
    .dday.none {
      color: #6b7280;
      font-weight: 400;
    }
    .empty {
      text-align: center;
      padding: 1rem;
      color: #9ca3af;
    }
    @media (max-width: 720px) {
      thead th:nth-child(2),
      tbody td:nth-child(2) {
        display: none; /* êµì‚¬ ì»¬ëŸ¼ ëª¨ë°”ì¼ì—ì„œ ì¶•ì†Œ */
      }
    }
  </style>
</head>
<body>
  <header>
    <button class="btn" onclick="history.back()">â† ë’¤ë¡œ</button>
    <div class="title">ğŸ“ ìˆ˜í–‰í‰ê°€ ê´€ë¦¬ ì‹œìŠ¤í…œ</div>
  </header>

  <main>
    <div class="toolbar">
      <input id="searchInput" type="search" placeholder="ì œëª© ë˜ëŠ” ë‹´ë‹¹ êµì‚¬ ê²€ìƒ‰â€¦" />
      <select id="gradeFilter">
        <option value="">ì „ì²´ í•™ë…„</option>
        <option value="1í•™ë…„">1í•™ë…„</option>
        <option value="2í•™ë…„">2í•™ë…„</option>
        <option value="3í•™ë…„">3í•™ë…„</option>
        <option value="ì „í•™ë…„">ì „í•™ë…„</option>
      </select>
      <select id="subjectFilter">
        <option value="">ì „ì²´ ê³¼ëª©</option>
        <option value="êµ­ì–´">êµ­ì–´</option>
        <option value="ì˜ì–´">ì˜ì–´</option>
        <option value="ìˆ˜í•™">ìˆ˜í•™</option>
        <option value="ê³¼í•™">ê³¼í•™</option>
        <option value="ê¸°íƒ€">ê¸°íƒ€</option>
      </select>
      <button class="btn" id="sortBtn">ğŸ“… ë§ˆê°ì¼ìˆœ</button>
      <button class="btn" id="favBtn">â­ ì¦ê²¨ì°¾ê¸°ë§Œ</button>
    </div>

    <section class="card">
      <table>
        <thead>
          <tr>
            <th>ìˆ˜í–‰í‰ê°€</th>
            <th>ë‹´ë‹¹ êµì‚¬</th>
            <th>í•™ë…„</th>
            <th>ë§ˆê°ì¼</th>
            <th>D-Day</th>
            <th>â­</th>
          </tr>
        </thead>
        <tbody id="tbody">
          <tr><td colspan="6" class="empty">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘â€¦</td></tr>
        </tbody>
      </table>
    </section>
  </main>

  <script>
    // =============== ë°ì´í„° ì •ì˜ ===============
    // ì „í•™ë…„+ê¸°íƒ€ í•­ëª©ì€ due: null -> D-Day, ì•Œë¦¼ ëŒ€ìƒ ì œì™¸
    const SUHANG = [
      // 2í•™ë…„ ì •ê·œ/ê³¼í•™/ìˆ˜í•™/êµ­ì–´/ì˜ì–´ ë“± (2í•™ê¸° ê¸°ì¤€ 10~11ì›” ì •ë„ë¡œ ì„ì˜ ë°°ì •)
      { title: '2025ë…„ 2í•™ë…„ ê³¼í•™ - ë¬¼ë¦¬í•™ ì¶”ê°€íƒêµ¬ ë³´ê³ ì„œ ì œì¶œ', teacher: 'ìœ í˜œì›', grade: '2í•™ë…„', subject: 'ê³¼í•™', due: '2025-10-10' },
      { title: '2025ë…„ 2í•™ë…„ ê³¼í•™ - [í™”í•™â… ] í™”í•™íƒêµ¬ë³´ê³ ì„œ ì œì¶œ', teacher: 'í™©ìœ¤ì„œ, ì¥ë‹¤ì •', grade: '2í•™ë…„', subject: 'ê³¼í•™', due: '2025-10-12' },
      { title: '2025ë…„ 2í•™ë…„ ìˆ˜í•™ - ê¸°í•˜ 2í•™ê¸° ë°œí‘œ ìˆ˜í–‰í‰ê°€ ì•ˆë‚´', teacher: 'ë°°ì¤€', grade: '2í•™ë…„', subject: 'ìˆ˜í•™', due: '2025-10-18' },
      { title: '2025ë…„ 2í•™ë…„ ê³¼í•™ - ì§€êµ¬ê³¼í•™â…  ê³¼í•™íƒêµ¬ë³´ê³ ì„œ(ìˆ˜í–‰í‰ê°€)', teacher: 'ê¹€ê¸°ê¶Œ', grade: '2í•™ë…„', subject: 'ê³¼í•™', due: '2025-10-20' },
      { title: '2025ë…„ 2í•™ë…„ ì˜ì–´ - Speaking ìˆ˜í–‰í‰ê°€ ê³µì§€', teacher: 'ì˜¤ê°€ì˜', grade: '2í•™ë…„', subject: 'ì˜ì–´', due: '2025-10-22' },
      { title: '2025ë…„ 2í•™ë…„ ìˆ˜í•™ - í™•ë¥ ê³¼í†µê³„ ì‹¬í™”íƒêµ¬ ë³´ê³ ì„œ(ê¸°í•œ ë‚´ ë¯¸ì œì¶œì)', teacher: 'ê°•ìˆ˜ë¯¸', grade: '2í•™ë…„', subject: 'ìˆ˜í•™', due: '2025-10-25' },
      { title: '2025ë…„ 2í•™ê¸° ë¬¼ë¦¬í•™ ìˆ˜í–‰í‰ê°€(íƒêµ¬ ë³´ê³ ì„œ)', teacher: 'ìœ í˜œì›', grade: '2í•™ë…„', subject: 'ê³¼í•™', due: '2025-11-01' },
      { title: '2025ë…„ 2í•™ê¸° ìˆ˜í•™â…  ì„œë…¼ìˆ í˜• ìˆ˜í–‰í‰ê°€ ë¬¸ì œ ì˜ˆì‹œ ë¬¸í•­ ì•ˆë‚´', teacher: 'ë°°ì¤€', grade: '2í•™ë…„', subject: 'ìˆ˜í•™', due: '2025-11-03' },
      { title: '2025ë…„ 2í•™ë…„ ê³¼í•™ - 2í•™ë…„ ìƒëª…ê³¼í•™â…  íƒêµ¬ë³´ê³ ì„œ ì™„ì„± ì œì¶œ', teacher: 'ë°•í˜„ë¬˜', grade: '2í•™ë…„', subject: 'ê³¼í•™', due: '2025-11-07' },
      { title: '2025ë…„ 2í•™ë…„ êµ­ì–´ - [2-7] 2í•™ê¸° ë¬¸í•™ ìˆ˜í–‰í‰ê°€(í™œë™ì§€)', teacher: 'ìœ ì •í™”, ê°•ë¯¼ì² ', grade: '2í•™ë…„', subject: 'êµ­ì–´', due: '2025-11-10' },
      { title: '2025ë…„ 2í•™ë…„ ì˜ì–´ - 2í•™ë…„ ì˜ì–´ ê³¼ì„¸íŠ¹ ê¸°ì´ˆìë£Œ ì œì¶œ', teacher: 'ì˜¤ê°€ì˜', grade: '2í•™ë…„', subject: 'ì˜ì–´', due: '2025-11-05' },
      { title: '2025ë…„ 2í•™ë…„ ê¸°íƒ€ - ë¬¸ì œ ë³€í™”ì˜ ëª¨ë¹Œ(2-7)', teacher: 'ê¹€í˜œìˆ˜', grade: '2í•™ë…„', subject: 'ê¸°íƒ€', due: '2025-11-15' },
      { title: '2025ë…„ 2í•™ë…„ ê¸°íƒ€ - ë¬¸ì œë¶„ì„(2-7)', teacher: 'ê¹€í˜œìˆ˜', grade: '2í•™ë…„', subject: 'ê¸°íƒ€', due: '2025-11-18' },
      { title: '2025ë…„ 2í•™ë…„ êµ­ì–´ - 2í•™ê¸° ìˆ˜í–‰í‰ê°€ ì°¸ê³  ì†Œì„¤ íŒŒì¼1(ë‹¤ì„¯ í¸ ëª¨ìŒ)', teacher: 'ìœ ì •í™”', grade: '2í•™ë…„', subject: 'êµ­ì–´', due: '2025-10-05' },
      { title: '2025ë…„ 2í•™ë…„ ìˆ˜í•™ - ìˆ˜í•™â…¡ ì‹¬í™”íƒêµ¬ ë³´ê³ ì„œ(7ë°˜)', teacher: 'ì •ì£¼í¬', grade: '2í•™ë…„', subject: 'ìˆ˜í•™', due: '2025-11-20' },
      { title: '2025ë…„ 2í•™ë…„ ìˆ˜í•™ - ìˆ˜ì—…ìœ ì—°í™” - ë‚˜ëŠ” ì™œ ìˆ˜í•™ì„ ëª»í•˜ëŠ”ê°€', teacher: 'ì •ì£¼í¬', grade: '2í•™ë…„', subject: 'ìˆ˜í•™', due: '2025-06-10' },
      { title: '2025ë…„ 2í•™ë…„ ê³¼í•™ - 2í•™ë…„ ì§€êµ¬ê³¼í•™â…  ê³¼í•™ë…ì„œë³´ê³ ì„œ(ì„¸íŠ¹ì¶”ê°€íƒêµ¬)', teacher: 'ê¹€ê¸°ê¶Œ', grade: '2í•™ë…„', subject: 'ê³¼í•™', due: '2025-06-15' },

      // ì „í•™ë…„ or ê¸°íƒ€/ê³¼í•™(ìœ ì—°í™”/ë™ì•„ë¦¬ ë“±) â€” due null: D-DayÂ·ì•Œë¦¼ ì œì™¸
      { title: '2025ë…„ ì „í•™ë…„ ê¸°íƒ€ - 2í•™ê¸° ê±´ê°•ì¤‘ì§„êµìœ¡ë´‰ì‚¬ í¬ìŠ¤í„°, í™œë™ì¼ì§€ ì œì¶œ', teacher: 'ì§€ë¯¼í¬', grade: 'ì „í•™ë…„', subject: 'ê¸°íƒ€', due: null },
      { title: '2025ë…„ ì „í•™ë…„ ê¸°íƒ€ - 2025-2 ë³´ê±´ ìˆ˜ì—… ì‹¬í™” íƒêµ¬', teacher: 'ì§€ë¯¼í¬', grade: 'ì „í•™ë…„', subject: 'ê¸°íƒ€', due: null },
      { title: '2025ë…„ ì „í•™ë…„ ê¸°íƒ€ - ê±´ê°•ì¦ì§„ êµìœ¡ë´‰ì‚¬ í™œë™ì¼ì§€ ì œì¶œ', teacher: 'ì§€ë¯¼í¬', grade: 'ì „í•™ë…„', subject: 'ê¸°íƒ€', due: null },
      { title: '2025ë…„ ì „í•™ë…„ ê¸°íƒ€ - í†µë²ˆì—­ ë™ì•„ë¦¬ ì‚°ì¶œë¬¼ ì œì¶œ', teacher: 'í™©ì°½ìˆ˜', grade: 'ì „í•™ë…„', subject: 'ê¸°íƒ€', due: null },
      { title: '2025ë…„ ì „í•™ë…„ ê¸°íƒ€ - [ìˆ˜ì—…í™œìš© ìœ ì—°í™”](Web Hacking) ì‹¤ìŠµ ë³´ê³ ì„œ ì œì¶œ', teacher: 'ìœ¤ì‹œë‚´', grade: 'ì „í•™ë…„', subject: 'ê¸°íƒ€', due: null },
      { title: '2025ë…„ ì „í•™ë…„ ê³¼í•™ - ìƒì²´ì‹ í˜¸ì™€ ë””ì§€í„¸í—¬ìŠ¤ 3,4ì¼ì°¨ ë³´ê³ ì„œ ì œì¶œ', teacher: 'ì§€ë¯¼í¬', grade: 'ì „í•™ë…„', subject: 'ê³¼í•™', due: null },
      { title: '2025ë…„ ì „í•™ë…„ ê³¼í•™ - [ìˆ˜ì—…í™œìš© ìœ ì—°í™”] ë‚˜ë§Œì˜ ì£¼ê¸°ìœ¨í‘œ ë§Œë“¤ê¸°', teacher: 'í™©ìœ¤ì„œ', grade: 'ì „í•™ë…„', subject: 'ê³¼í•™', due: null },
      { title: '2025ë…„ ì „í•™ë…„ ê¸°íƒ€ - í•´í‚¹ë°˜ 1í•™ê¸° ë™ì•„ë¦¬ í™œë™ ë³´ê³ ì„œ', teacher: 'ìœ¤ì‹œë‚´', grade: 'ì „í•™ë…„', subject: 'ê¸°íƒ€', due: null },
      { title: '2025ë…„ ì „í•™ë…„ ê¸°íƒ€ - [ìˆ˜ì—…í™œìš© ìœ ì—°í™”](Web Hacking) ììœ¨ì  êµìœ¡ê³¼ì • íƒêµ¬ ë³´ê³ ì„œ ì œì¶œ', teacher: 'ìœ¤ì‹œë‚´', grade: 'ì „í•™ë…„', subject: 'ê¸°íƒ€', due: null },
      { title: '2025ë…„ ì „í•™ë…„ ê¸°íƒ€ - ì°½ì˜ë¡œë´‡ë°˜ í™œë™ì¼ì§€', teacher: 'í™©ë¯¼ê¸°', grade: 'ì „í•™ë…„', subject: 'ê¸°íƒ€', due: null },
      { title: '2025ë…„ ì „í•™ë…„ ê¸°íƒ€ - ê³µê°„ ì‹¬í™” íƒêµ¬ ì£¼ì œ ë³´ê³ ì„œ ì œì¶œ', teacher: 'í™©ìŠ¹ê·¼', grade: 'ì „í•™ë…„', subject: 'ê¸°íƒ€', due: null },
      { title: '2025ë…„ ì „í•™ë…„ ê³¼í•™ - [ìˆ˜ì—…í™œìš©ìœ ì—°í™”] í¬ì¸íŒ… ë²¡í„°, ê³µê°„ì„ ì§€ë‚˜ëŠ” ì—ë„ˆì§€ íë¦„', teacher: 'í™©ë¯¼ê¸°', grade: 'ì „í•™ë…„', subject: 'ê³¼í•™', due: null },
      { title: '2025ë…„ ì „í•™ë…„ ê³¼í•™ - ê¸°í›„ ë³€í™”ì— ëŒ€í•œ ê³¼í•™ì  í•´ê²° ë°©ë²• ì—°êµ¬(ìˆ˜ì—…ìœ ì—°í™”Â·ììœ¨ì  êµìœ¡ê³¼ì •)', teacher: 'ê¹€ê¸°ê¶Œ', grade: 'ì „í•™ë…„', subject: 'ê³¼í•™', due: null },
    ];

    // ============ ìƒíƒœ ============
    let favorites = JSON.parse(localStorage.getItem('suhangFavorites') || '[]');
    let showFavOnly = false;
    let sortByDue = false;

    const $tbody = document.getElementById('tbody');
    const $search = document.getElementById('searchInput');
    const $grade = document.getElementById('gradeFilter');
    const $subject = document.getElementById('subjectFilter');
    const $sortBtn = document.getElementById('sortBtn');
    const $favBtn = document.getElementById('favBtn');

    // ============ ìœ í‹¸ ============
    function calcDDay(due) {
      if (!due) return { label: '-', cls: 'dday none' };
      const today = new Date();
      today.setHours(0,0,0,0);
      const d = new Date(due);
      d.setHours(0,0,0,0);
      const diff = Math.floor((d - today) / (1000*60*60*24));
      if (diff < 0) return { label: 'ë§ˆê°', cls: 'dday expired' };
      if (diff === 0) return { label: 'D-Day', cls: 'dday today' };
      return { label: `D-${diff}`, cls: 'dday' };
    }

    function shouldAlert(entry) {
      if (!entry.due) return false;
      if (entry.grade === 'ì „í•™ë…„' && entry.subject === 'ê¸°íƒ€') return false;
      const today = new Date();
      today.setHours(0,0,0,0);
      const d = new Date(entry.due);
      d.setHours(0,0,0,0);
      const diff = Math.floor((d - today) / (1000*60*60*24));
      return diff === 1;
    }

    // ============ ë Œë” ============
    function render() {
      let list = [...SUHANG];

      const kw = $search.value.trim().toLowerCase();
      if (kw) {
        list = list.filter(x =>
          x.title.toLowerCase().includes(kw) ||
          x.teacher.toLowerCase().includes(kw)
        );
      }

      if ($grade.value) {
        list = list.filter(x => x.grade === $grade.value);
      }

      if ($subject.value) {
        list = list.filter(x => x.subject === $subject.value);
      }

      if (showFavOnly) {
        list = list.filter(x => favorites.includes(x.title));
      }

      if (sortByDue) {
        list.sort((a, b) => {
          if (!a.due && !b.due) return 0;
          if (!a.due) return 1;
          if (!b.due) return -1;
          return new Date(a.due) - new Date(b.due);
        });
      }

      if (!list.length) {
        $tbody.innerHTML = `<tr><td colspan="6" class="empty">ì¡°ê±´ì— ë§ëŠ” ìˆ˜í–‰í‰ê°€ê°€ ì—†ìŠµë‹ˆë‹¤.</td></tr>`;
        return;
      }

      $tbody.innerHTML = list.map(x => {
        const dday = calcDDay(x.due);
        const favActive = favorites.includes(x.title);
        return `
          <tr>
            <td>${x.title}<span class="badge">${x.subject}</span></td>
            <td>${x.teacher}</td>
            <td><span class="grade">${x.grade}</span></td>
            <td>${x.due || '-'}</td>
            <td><span class="${dday.cls}">${dday.label}</span></td>
            <td>
              <button class="favorite-btn ${favActive ? 'active' : ''}" onclick="toggleFavorite('${x.title.replace(/'/g, "\\'")}')">
                â˜…
              </button>
            </td>
          </tr>
        `;
      }).join('');
    }

    // ============ ì¦ê²¨ì°¾ê¸° ============
    function toggleFavorite(title) {
      const idx = favorites.indexOf(title);
      if (idx >= 0) favorites.splice(idx, 1);
      else favorites.push(title);
      localStorage.setItem('suhangFavorites', JSON.stringify(favorites));
      render();
    }
    window.toggleFavorite = toggleFavorite;

    // ============ ì´ë²¤íŠ¸ ============
    $search.addEventListener('input', render);
    $grade.addEventListener('change', render);
    $subject.addEventListener('change', render);

    $sortBtn.addEventListener('click', () => {
      sortByDue = !sortByDue;
      $sortBtn.textContent = sortByDue ? 'ğŸ“… ë§ˆê°ì¼ìˆœ(ON)' : 'ğŸ“… ë§ˆê°ì¼ìˆœ';
      render();
    });

    $favBtn.addEventListener('click', () => {
      showFavOnly = !showFavOnly;
      $favBtn.textContent = showFavOnly ? 'â­ ì¦ê²¨ì°¾ê¸°ë§Œ(ON)' : 'â­ ì¦ê²¨ì°¾ê¸°ë§Œ';
      render();
    });

    // ============ D-1 ì•Œë¦¼ ============
    function checkAlertsOnce() {
      const alerted = sessionStorage.getItem('suhangAlerted');
      if (alerted) return;
      const near = SUHANG.filter(shouldAlert);
      if (near.length) {
        alert('ğŸ“¢ ë§ˆê° í•˜ë£¨ ì „ ìˆ˜í–‰í‰ê°€:\n\n' + near.map(x => 'â€¢ ' + x.title).join('\n'));
      }
      sessionStorage.setItem('suhangAlerted', '1');
    }

    // ì´ˆê¸° ì‹¤í–‰
    render();
    checkAlertsOnce();
  </script>
</body>
</html>
